
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="test_dim_handling.html">
      
      
        <link rel="next" href="test_enumerated_values_copy_via_derived_from.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>test_enumerated_values - Test Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#test_enumerated_values" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Test Documentation" class="md-header__button md-logo" aria-label="Test Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Test Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              test_enumerated_values
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Test Documentation" class="md-nav__button md-logo" aria-label="Test Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Test Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_derived_from_path_resolving.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_derived_from_path_resolving
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_development.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_development
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_application_of_default_values.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_application_of_default_values
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_cluster_inheritance_via_derived_from.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_cluster_inheritance_via_derived_from
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_dim_handling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_dim_handling
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    test_enumerated_values
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="test_enumerated_values.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    test_enumerated_values
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_enumerated_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_default_extension" class="md-nav__link">
    <span class="md-ellipsis">
      test_default_extension
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_default_usage" class="md-nav__link">
    <span class="md-ellipsis">
      test_default_usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_result_in_same_value" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_and_distinct_result_in_same_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_and_distinct_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_handling" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_isdefault_with_value" class="md-nav__link">
    <span class="md-ellipsis">
      test_isdefault_with_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_multiple_isdefault" class="md-nav__link">
    <span class="md-ellipsis">
      test_multiple_isdefault
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_simple_read_write" class="md-nav__link">
    <span class="md-ellipsis">
      test_simple_read_write
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_three_containers" class="md-nav__link">
    <span class="md-ellipsis">
      test_three_containers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_usage_combinations" class="md-nav__link">
    <span class="md-ellipsis">
      test_usage_combinations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_value_already_defined" class="md-nav__link">
    <span class="md-ellipsis">
      test_value_already_defined
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_value_name_already_defined_same_container" class="md-nav__link">
    <span class="md-ellipsis">
      test_value_name_already_defined_same_container
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_enumerated_values_copy_via_derived_from.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_enumerated_values_copy_via_derived_from
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_field_inheritance_via_derived_from.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_field_inheritance_via_derived_from
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_logical_integrity.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_logical_integrity
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_peripheral_inheritance_via_derived_from.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_peripheral_inheritance_via_derived_from
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_register_inheritance_via_derived_from.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_register_inheritance_via_derived_from
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="test_size_inheritance_and_adjustment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    test_size_inheritance_and_adjustment
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_enumerated_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_default_extension" class="md-nav__link">
    <span class="md-ellipsis">
      test_default_extension
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_default_usage" class="md-nav__link">
    <span class="md-ellipsis">
      test_default_usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_result_in_same_value" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_and_distinct_result_in_same_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_values" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_and_distinct_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_do_not_care_handling" class="md-nav__link">
    <span class="md-ellipsis">
      test_do_not_care_handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_isdefault_with_value" class="md-nav__link">
    <span class="md-ellipsis">
      test_isdefault_with_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_multiple_isdefault" class="md-nav__link">
    <span class="md-ellipsis">
      test_multiple_isdefault
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_simple_read_write" class="md-nav__link">
    <span class="md-ellipsis">
      test_simple_read_write
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_three_containers" class="md-nav__link">
    <span class="md-ellipsis">
      test_three_containers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_usage_combinations" class="md-nav__link">
    <span class="md-ellipsis">
      test_usage_combinations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_value_already_defined" class="md-nav__link">
    <span class="md-ellipsis">
      test_value_already_defined
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests.test_process.test_enumerated_values.test_value_name_already_defined_same_container" class="md-nav__link">
    <span class="md-ellipsis">
      test_value_name_already_defined_same_container
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="test_enumerated_values">test_enumerated_values</h1>
<div class="doc doc-object doc-module">
<a id="tests.test_process.test_enumerated_values"></a>
<div class="doc doc-contents first">
<p>Enumerated values are used to provide human-readable names and descriptions for specific bitfields that have a limited
set of possible values. These enumerations make it easier to understand and work with specific configurations of
peripheral registers, since the enumerated names give meaningful descriptions instead of just raw numerical values.</p>
<p>This feature contains test cases that validate how enumerated values are defined, processed, and applied in various
scenarios. The test cases ensure that the parser correctly handles the definition and usage of enumerated values.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_default_extension">
<code class="highlight language-python"><span class="n">test_default_extension</span></code>
</h2>
<div class="doc doc-contents">
<p>This test focuses on how parsers should handle <code>enumeratedValue</code> elements marked with <code>isDefault=True</code>. In
<code>svdconv</code>, such values are parsed without any special processing, essentially ignoring their purpose beyond
simple recognition. However, according to the CMSIS-SVD standard, <code>isDefault</code> should define a name and
description for all other values that are not explicitly listed. This means a robust parser should extend the
enumerated values to include all potential values not explicitly defined, using the <code>isDefault</code> entry as a
template.</p>
<p><strong>Expected Outcome:</strong> The parser should go beyond <code>svdconv</code>'s behavior by automatically identifying all values not
covered by explicit <code>enumeratedValue</code> entries and adding them to the container using the <code>isDefault</code>
description. For example, if the <code>isDefault</code> value is defined with a description like "Description for
default," the parser should generate new entries for every unlisted possible value, appending them to the
existing list of enumerated values. In this case, the parser should correctly identify that <code>0b10</code> is
explicitly listed, while the values <code>0</code>, <code>1</code>, and <code>3</code> are not. It should then add these values using the
<code>isDefault</code> template, resulting in a complete and exhaustive set of enumerated values, ensuring that any
unspecified cases are properly accounted for and described, thus enhancing clarity and usability.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_default_extension</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test focuses on how parsers should handle `enumeratedValue` elements marked with `isDefault=True`. In</span>
<span class="sd">    `svdconv`, such values are parsed without any special processing, essentially ignoring their purpose beyond</span>
<span class="sd">    simple recognition. However, according to the CMSIS-SVD standard, `isDefault` should define a name and</span>
<span class="sd">    description for all other values that are not explicitly listed. This means a robust parser should extend the</span>
<span class="sd">    enumerated values to include all potential values not explicitly defined, using the `isDefault` entry as a</span>
<span class="sd">    template.</span>

<span class="sd">    **Expected Outcome:** The parser should go beyond `svdconv`'s behavior by automatically identifying all values not</span>
<span class="sd">    covered by explicit `enumeratedValue` entries and adding them to the container using the `isDefault`</span>
<span class="sd">    description. For example, if the `isDefault` value is defined with a description like "Description for</span>
<span class="sd">    default," the parser should generate new entries for every unlisted possible value, appending them to the</span>
<span class="sd">    existing list of enumerated values. In this case, the parser should correctly identify that `0b10` is</span>
<span class="sd">    explicitly listed, while the values `0`, `1`, and `3` are not. It should then add these values using the</span>
<span class="sd">    `isDefault` template, resulting in a complete and exhaustive set of enumerated values, ensuring that any</span>
<span class="sd">    unspecified cases are properly accounted for and described, thus enhancing clarity and usability.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/default_extension.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_1"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_3"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/default_extension.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>default_extension<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>default<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>default<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;isDefault&gt;</span>true<span class="nt">&lt;/isDefault&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_default_usage">
<code class="highlight language-python"><span class="n">test_default_usage</span></code>
</h2>
<div class="doc doc-contents">
<p>This test verifies the parser's handling of <code>&lt;enumeratedValues&gt;</code> containers when the <code>&lt;usage&gt;</code> attribute is
not explicitly set. According to the CMSIS-SVD standard, if the <code>&lt;usage&gt;</code> attribute is omitted, the enumerated
values should default to <code>read-write</code>. This behavior simplifies the definition of common cases where
enumerated values apply equally to both read and write operations. The SVD file for this test omits the
<code>&lt;usage&gt;</code> attribute to confirm that the parser correctly defaults to <code>read-write</code>.</p>
<p><strong>Expected Outcome:</strong> The parser should process the SVD file without errors, correctly interpreting the
<code>&lt;enumeratedValues&gt;</code> container as having a <code>read-write</code> usage. It must ensure that, even when the <code>&lt;usage&gt;</code>
attribute is missing, the enumerated values are accessible for both reading and writing. This behavior aligns
with <code>svdconv</code>, which also treats the absence of a <code>&lt;usage&gt;</code> attribute as equivalent to <code>read-write</code>.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_default_usage</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test verifies the parser's handling of `&lt;enumeratedValues&gt;` containers when the `&lt;usage&gt;` attribute is</span>
<span class="sd">    not explicitly set. According to the CMSIS-SVD standard, if the `&lt;usage&gt;` attribute is omitted, the enumerated</span>
<span class="sd">    values should default to `read-write`. This behavior simplifies the definition of common cases where</span>
<span class="sd">    enumerated values apply equally to both read and write operations. The SVD file for this test omits the</span>
<span class="sd">    `&lt;usage&gt;` attribute to confirm that the parser correctly defaults to `read-write`.</span>

<span class="sd">    **Expected Outcome:** The parser should process the SVD file without errors, correctly interpreting the</span>
<span class="sd">    `&lt;enumeratedValues&gt;` container as having a `read-write` usage. It must ensure that, even when the `&lt;usage&gt;`</span>
<span class="sd">    attribute is missing, the enumerated values are accessible for both reading and writing. This behavior aligns</span>
<span class="sd">    with `svdconv`, which also treats the absence of a `&lt;usage&gt;` attribute as equivalent to `read-write`.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/default_usage.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"FieldAEnumeratedValue"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">READ_WRITE</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/default_usage.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>default_usage<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_result_in_same_value">
<code class="highlight language-python"><span class="n">test_do_not_care_and_distinct_result_in_same_value</span></code>
</h2>
<div class="doc doc-contents">
<p>This test focuses on scenarios where a combination of "do not care" bits and distinct enumerated values
inadvertently leads to the same final value. This can occur when the "do not care" handling allows for
multiple bit combinations to be interpreted as the same value, but there is also a specific, distinct
enumerated value defined separately. In such cases, it is essential for the parser to correctly identify and
handle these overlaps, avoiding unintended duplications.</p>
<p><strong>Expected Outcome:</strong> The parser should have the same behavior as <code>svdconv</code>, which
processes the configuration but issues a warning and ignores the second, duplicated value.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_do_not_care_and_distinct_result_in_same_value</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test focuses on scenarios where a combination of "do not care" bits and distinct enumerated values</span>
<span class="sd">    inadvertently leads to the same final value. This can occur when the "do not care" handling allows for</span>
<span class="sd">    multiple bit combinations to be interpreted as the same value, but there is also a specific, distinct</span>
<span class="sd">    enumerated value defined separately. In such cases, it is essential for the parser to correctly identify and</span>
<span class="sd">    handle these overlaps, avoiding unintended duplications.</span>

<span class="sd">    **Expected Outcome:** The parser should have the same behavior as `svdconv`, which</span>
<span class="sd">    processes the configuration but issues a warning and ignores the second, duplicated value.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">ProcessWarning</span><span class="p">):</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span>
            <span class="s2">"enumerated_values/do_not_care_and_distinct_result_in_same_value.svd"</span>
        <span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">enum_container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx0_0"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx0"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx0_2"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx0"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/do_not_care_and_distinct_result_in_same_value.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>do_not_care_and_distinct_result_in_same_value<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx0<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx0<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx0<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>Test<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>Test<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_do_not_care_and_distinct_values">
<code class="highlight language-python"><span class="n">test_do_not_care_and_distinct_values</span></code>
</h2>
<div class="doc doc-contents">
<p>This test examines the parser's ability to handle a mix of "do not care" bits and distinct values within a
single enumerated value container. In certain cases, bitfields may allow specific bits to be ignored or
treated as irrelevant, while other values must be distinctly recognized. The parser needs to accurately
interpret these scenarios, grouping together values that share a logical behavior despite differing in
specific bit positions, while still uniquely identifying distinct values where necessary.</p>
<p><strong>Expected Outcome:</strong> The parser should successfully process the test file, correctly handling both "do not care"
bits and distinct values within the same container. Enumerated values that include wildcard or ignored bits
should be grouped under the same name and description, such as <code>0x00</code> and <code>0x02</code>, both treated as <code>0bx0</code>.
Meanwhile, fully distinct values like <code>0x03</code> should be uniquely recognized as <code>0b11</code>.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_do_not_care_and_distinct_values</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test examines the parser's ability to handle a mix of "do not care" bits and distinct values within a</span>
<span class="sd">    single enumerated value container. In certain cases, bitfields may allow specific bits to be ignored or</span>
<span class="sd">    treated as irrelevant, while other values must be distinctly recognized. The parser needs to accurately</span>
<span class="sd">    interpret these scenarios, grouping together values that share a logical behavior despite differing in</span>
<span class="sd">    specific bit positions, while still uniquely identifying distinct values where necessary.</span>

<span class="sd">    **Expected Outcome:** The parser should successfully process the test file, correctly handling both "do not care"</span>
<span class="sd">    bits and distinct values within the same container. Enumerated values that include wildcard or ignored bits</span>
<span class="sd">    should be grouped under the same name and description, such as `0x00` and `0x02`, both treated as `0bx0`.</span>
<span class="sd">    Meanwhile, fully distinct values like `0x03` should be uniquely recognized as `0b11`.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/do_not_care_and_distinct_values.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx0_0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx0_2"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/do_not_care_and_distinct_values.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>do_not_care_and_distinct_values<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx0<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx0<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx0<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b11<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b11<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b11<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_do_not_care_handling">
<code class="highlight language-python"><span class="n">test_do_not_care_handling</span></code>
</h2>
<div class="doc doc-contents">
<p>This test verifies how the parser processes enumerated values when specific bits are marked as "do not care."
In some cases, a bitfield may have multiple possible values where certain bits are irrelevant, meaning they do
not influence the final behavior of the register. This is commonly represented using wildcards or
placeholders, and the parser must interpret these "do not care" bits correctly to allow multiple enumerations
with the same description but different effective values.</p>
<p><strong>Expected Outcome:</strong> The parser should accurately interpret and process the "do not care" bits, allowing multiple
enumerated values that represent different numeric values to share the same logical name and description. This
results in a list of enumerated values that map distinct values, such as <code>0x00</code>, <code>0x04</code>, <code>0x01</code>, <code>0x05</code>, and
so on, under similar names based on their functional grouping. The parser must handle this scenario without
confusion or conflicts, ensuring that each enumeration is correctly represented in the output.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_do_not_care_handling</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test verifies how the parser processes enumerated values when specific bits are marked as "do not care."</span>
<span class="sd">    In some cases, a bitfield may have multiple possible values where certain bits are irrelevant, meaning they do</span>
<span class="sd">    not influence the final behavior of the register. This is commonly represented using wildcards or</span>
<span class="sd">    placeholders, and the parser must interpret these "do not care" bits correctly to allow multiple enumerations</span>
<span class="sd">    with the same description but different effective values.</span>

<span class="sd">    **Expected Outcome:** The parser should accurately interpret and process the "do not care" bits, allowing multiple</span>
<span class="sd">    enumerated values that represent different numeric values to share the same logical name and description. This</span>
<span class="sd">    results in a list of enumerated values that map distinct values, such as `0x00`, `0x04`, `0x01`, `0x05`, and</span>
<span class="sd">    so on, under similar names based on their functional grouping. The parser must handle this scenario without</span>
<span class="sd">    confusion or conflicts, ensuring that each enumeration is correctly represented in the output.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/do_not_care_handling.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx00_0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx00"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx01_1"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx01"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx10_2"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx11_3"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx00_4"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx00"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">4</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx01_5"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx01"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">5</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx10_6"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">6</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0bx11_7"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0bx11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">7</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/do_not_care_handling.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>do_not_care_handling<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[2:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0bx11<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0bx11<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0bx11<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_isdefault_with_value">
<code class="highlight language-python"><span class="n">test_isdefault_with_value</span></code>
</h2>
<div class="doc doc-contents">
<p>The CMSIS-SVD standard specifies that <code>enumeratedValue</code> should contain either <code>isDefault</code> or <code>value</code>, but not
both simultaneously. However, <code>svdconv</code> does not enforce this rule and will not flag cases where both elements
are present.</p>
<p><strong>Expected Outcome:</strong> A robust parser should detect when an <code>enumeratedValue</code> entry incorrectly includes both
<code>isDefault</code> and <code>value</code>, should ignore the value and raise a warning.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_isdefault_with_value</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    The CMSIS-SVD standard specifies that `enumeratedValue` should contain either `isDefault` or `value`, but not</span>
<span class="sd">    both simultaneously. However, `svdconv` does not enforce this rule and will not flag cases where both elements</span>
<span class="sd">    are present.</span>

<span class="sd">    **Expected Outcome:** A robust parser should detect when an `enumeratedValue` entry incorrectly includes both</span>
<span class="sd">    `isDefault` and `value`, should ignore the value and raise a warning.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">ProcessWarning</span><span class="p">):</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/isdefault_with_value.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_0"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_1"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"default_3"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for default"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/isdefault_with_value.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>isdefault_with_value<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>default<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>default<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b11<span class="nt">&lt;/value&gt;</span>
<span class="w">                  </span><span class="nt">&lt;isDefault&gt;</span>true<span class="nt">&lt;/isDefault&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_multiple_isdefault">
<code class="highlight language-python"><span class="n">test_multiple_isdefault</span></code>
</h2>
<div class="doc doc-contents">
<p>This test examines how the parser handles cases where multiple enumerated values within the same
<code>&lt;enumeratedValues&gt;</code> container are marked as <code>isDefault</code>. According to logical interpretation, only one
enumerated value should be designated as the default, as having multiple defaults would create ambiguity in
determining which value should be prioritized or used by default. While <code>svdconv</code> processes this scenario
without issuing a warning or error, this behavior appears to be a bug or oversight. A robust parser
implementation should flag such cases and enforce a rule that only one enumerated value can be marked as
<code>isDefault</code> within a container.</p>
<p><strong>Expected Outcome:</strong> The parser should detect when more than one enumerated value is marked as <code>isDefault</code> in the
same container and raise an error to indicate this improper configuration. Unlike <code>svdconv</code>, which processes
the file without complaints, the parser must ensure clarity and consistency by strictly enforcing that only
one enumerated value can be assigned as the default, preventing potential conflicts or misinterpretations
during peripheral configuration.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span>
    <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">"Multiple isDefault"</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_multiple_isdefault</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test examines how the parser handles cases where multiple enumerated values within the same</span>
<span class="sd">    `&lt;enumeratedValues&gt;` container are marked as `isDefault`. According to logical interpretation, only one</span>
<span class="sd">    enumerated value should be designated as the default, as having multiple defaults would create ambiguity in</span>
<span class="sd">    determining which value should be prioritized or used by default. While `svdconv` processes this scenario</span>
<span class="sd">    without issuing a warning or error, this behavior appears to be a bug or oversight. A robust parser</span>
<span class="sd">    implementation should flag such cases and enforce a rule that only one enumerated value can be marked as</span>
<span class="sd">    `isDefault` within a container.</span>

<span class="sd">    **Expected Outcome:** The parser should detect when more than one enumerated value is marked as `isDefault` in the</span>
<span class="sd">    same container and raise an error to indicate this improper configuration. Unlike `svdconv`, which processes</span>
<span class="sd">    the file without complaints, the parser must ensure clarity and consistency by strictly enforcing that only</span>
<span class="sd">    one enumerated value can be assigned as the default, preventing potential conflicts or misinterpretations</span>
<span class="sd">    during peripheral configuration.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/multiple_isdefault.svd"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/multiple_isdefault.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>multiple_isdefault<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;isDefault&gt;</span>true<span class="nt">&lt;/isDefault&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;isDefault&gt;</span>true<span class="nt">&lt;/isDefault&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_simple_read_write">
<code class="highlight language-python"><span class="n">test_simple_read_write</span></code>
</h2>
<div class="doc doc-contents">
<p>This test verifies how the parser handles enumerated values associated with a field that has both read and
write access. The SVD file defines a single field with an enumerated value container specifying four possible
values, each with a unique description. The enumerated values allow for a human-readable interpretation of the
bitfield content. The parser must accurately interpret and process these enumerations, ensuring the values are
correctly mapped to their corresponding descriptions.</p>
<p><strong>Expected Outcome:</strong> The parser should successfully process the enumerated values for the field within the
register. It should recognize the container name as "FieldAEnumeratedValue" and categorize it for both read
and write access. The container should contain four enumerated values, each associated with the binary values
<code>0b00</code>, <code>0b01</code>, <code>0b10</code>, and <code>0b11</code>, with their respective descriptions. The parser should not mark any of
these values as default. The entire structure should be parsed without any errors, matching the expected
behavior of <code>svdconv</code>.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_simple_read_write</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test verifies how the parser handles enumerated values associated with a field that has both read and</span>
<span class="sd">    write access. The SVD file defines a single field with an enumerated value container specifying four possible</span>
<span class="sd">    values, each with a unique description. The enumerated values allow for a human-readable interpretation of the</span>
<span class="sd">    bitfield content. The parser must accurately interpret and process these enumerations, ensuring the values are</span>
<span class="sd">    correctly mapped to their corresponding descriptions.</span>

<span class="sd">    **Expected Outcome:** The parser should successfully process the enumerated values for the field within the</span>
<span class="sd">    register. It should recognize the container name as "FieldAEnumeratedValue" and categorize it for both read</span>
<span class="sd">    and write access. The container should contain four enumerated values, each associated with the binary values</span>
<span class="sd">    `0b00`, `0b01`, `0b10`, and `0b11`, with their respective descriptions. The parser should not mark any of</span>
<span class="sd">    these values as default. The entire structure should be parsed without any errors, matching the expected</span>
<span class="sd">    behavior of `svdconv`.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/simple_read_write.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"FieldAEnumeratedValue"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">READ_WRITE</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b00"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b00"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mb">0b00</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b01"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b01"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mb">0b01</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b10"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mb">0b10</span>

    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b11"</span>
    <span class="k">assert</span> <span class="n">container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mb">0b11</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/simple_read_write.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>simple_read_write<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b11<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b11<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b11<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_three_containers">
<code class="highlight language-python"><span class="n">test_three_containers</span></code>
</h2>
<div class="doc doc-contents">
<p>This test examines the parser's handling of multiple <code>&lt;enumeratedValues&gt;</code> containers within a field. According
to the CMSIS-SVD specification, a field can have one <code>&lt;enumeratedValues&gt;</code> container to define enumerated
values for both read and write access, or two separate containers, one for read and one for write operations.
The SVD file used in this test case deliberately includes three <code>&lt;enumeratedValues&gt;</code> containers, which exceeds
the allowable configuration. This setup aims to verify that the parser correctly identifies and rejects the
improper use of multiple enumerated value containers.</p>
<p><strong>Expected Outcome:</strong> The parser should raise an error due to the presence of three <code>&lt;enumeratedValues&gt;</code>
containers in the SVD file. It must recognize that more than two containers are not permitted, regardless of
the usage attributes specified. This behavior aligns with the CMSIS-SVD standard, which allows a maximum of
two separate containers (one for read and one for write) or a single combined container for both. Since
<code>svdconv</code> does not support more than two containers, a compliant parser implementation should similarly
enforce this restriction, triggering an error in this scenario.</p>
<p><strong>Processable with svdconv:</strong> no</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span>
    <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">"Too many &lt;enumeratedValues&gt; container specified"</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_three_containers</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test examines the parser's handling of multiple `&lt;enumeratedValues&gt;` containers within a field. According</span>
<span class="sd">    to the CMSIS-SVD specification, a field can have one `&lt;enumeratedValues&gt;` container to define enumerated</span>
<span class="sd">    values for both read and write access, or two separate containers, one for read and one for write operations.</span>
<span class="sd">    The SVD file used in this test case deliberately includes three `&lt;enumeratedValues&gt;` containers, which exceeds</span>
<span class="sd">    the allowable configuration. This setup aims to verify that the parser correctly identifies and rejects the</span>
<span class="sd">    improper use of multiple enumerated value containers.</span>

<span class="sd">    **Expected Outcome:** The parser should raise an error due to the presence of three `&lt;enumeratedValues&gt;`</span>
<span class="sd">    containers in the SVD file. It must recognize that more than two containers are not permitted, regardless of</span>
<span class="sd">    the usage attributes specified. This behavior aligns with the CMSIS-SVD standard, which allows a maximum of</span>
<span class="sd">    two separate containers (one for read and one for write) or a single combined container for both. Since</span>
<span class="sd">    `svdconv` does not support more than two containers, a compliant parser implementation should similarly</span>
<span class="sd">    enforce this restriction, triggering an error in this scenario.</span>

<span class="sd">    **Processable with svdconv:** no</span>
<span class="sd">    """</span>

    <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/three_containers.svd"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/three_containers.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>three_containers<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_usage_combinations">
<code class="highlight language-python"><span class="n">test_usage_combinations</span></code>
</h2>
<div class="doc doc-contents">
<p>This test examines how the parser handles different combinations of <code>&lt;usage&gt;</code> attributes within
<code>&lt;enumeratedValues&gt;</code> containers. The CMSIS-SVD standard allows certain combinations of <code>&lt;usage&gt;</code> values (such
as <code>read</code> and <code>write</code>) but restricts others. The test file is set up to dynamically replace the placeholders
"FIRST_INPUT" and "SECOND_INPUT" with combinations of <code>read</code>, <code>write</code>, and <code>read-write</code>, allowing multiple
test cases to be evaluated. The goal is to verify if the parser correctly accepts valid combinations, like
<code>read</code> and <code>write</code>, and raises errors for invalid ones, such as <code>read-write</code> paired with any other value.</p>
<p><strong>Expected Outcome:</strong> The parser should process the file successfully when the <code>&lt;usage&gt;</code> combination is <code>read</code> and
<code>write</code>, creating two valid <code>&lt;enumeratedValues&gt;</code> containers with the expected <code>read</code> and <code>write</code> usage types.
However, it must raise errors for all other combinations, including <code>write</code> and <code>write</code>, <code>read</code> and <code>read</code>, or
any instance where <code>read-write</code> is used in conjunction with another <code>&lt;usage&gt;</code>. This behavior is consistent
with <code>svdconv</code>, which also restricts most of these combinations, except for the <code>read</code> and <code>write</code> pairing.</p>
<p><strong>Processable with svdconv:</strong> the combination of read and write yes, other combinations not</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">"first_input,second_input,expected1,expected2"</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="s2">"read"</span><span class="p">,</span>
            <span class="s2">"write"</span><span class="p">,</span>
            <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span>
            <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">WRITE</span><span class="p">,</span>
            <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="s2">"write"</span><span class="p">,</span>
            <span class="s2">"read"</span><span class="p">,</span>
            <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">WRITE</span><span class="p">,</span>
            <span class="n">EnumUsageType</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span>
            <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error::svdsuite.process.ProcessWarning"</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"read"</span><span class="p">,</span> <span class="s2">"read"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"write"</span><span class="p">,</span> <span class="s2">"write"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"read"</span><span class="p">,</span> <span class="s2">"read-write"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"write"</span><span class="p">,</span> <span class="s2">"read-write"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"read-write"</span><span class="p">,</span> <span class="s2">"read"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">"read-write"</span><span class="p">,</span> <span class="s2">"write"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="s2">"read-write"</span><span class="p">,</span> <span class="s2">"read-write"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raises</span><span class="o">=</span><span class="n">ProcessException</span><span class="p">)</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_usage_combinations</span><span class="p">(</span>
    <span class="n">first_input</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">second_input</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">expected1</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EnumUsageType</span><span class="p">,</span>
    <span class="n">expected2</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EnumUsageType</span><span class="p">,</span>
    <span class="n">get_test_svd_file_content</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bytes</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test examines how the parser handles different combinations of `&lt;usage&gt;` attributes within</span>
<span class="sd">    `&lt;enumeratedValues&gt;` containers. The CMSIS-SVD standard allows certain combinations of `&lt;usage&gt;` values (such</span>
<span class="sd">    as `read` and `write`) but restricts others. The test file is set up to dynamically replace the placeholders</span>
<span class="sd">    "FIRST_INPUT" and "SECOND_INPUT" with combinations of `read`, `write`, and `read-write`, allowing multiple</span>
<span class="sd">    test cases to be evaluated. The goal is to verify if the parser correctly accepts valid combinations, like</span>
<span class="sd">    `read` and `write`, and raises errors for invalid ones, such as `read-write` paired with any other value.</span>

<span class="sd">    **Expected Outcome:** The parser should process the file successfully when the `&lt;usage&gt;` combination is `read` and</span>
<span class="sd">    `write`, creating two valid `&lt;enumeratedValues&gt;` containers with the expected `read` and `write` usage types.</span>
<span class="sd">    However, it must raise errors for all other combinations, including `write` and `write`, `read` and `read`, or</span>
<span class="sd">    any instance where `read-write` is used in conjunction with another `&lt;usage&gt;`. This behavior is consistent</span>
<span class="sd">    with `svdconv`, which also restricts most of these combinations, except for the `read` and `write` pairing.</span>

<span class="sd">    **Processable with svdconv:** the combination of read and write yes, other combinations not</span>
<span class="sd">    """</span>

    <span class="n">file_name</span> <span class="o">=</span> <span class="s2">"enumerated_values/usage_combinations.svd"</span>

    <span class="n">file_content</span> <span class="o">=</span> <span class="n">get_test_svd_file_content</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
    <span class="n">file_content</span> <span class="o">=</span> <span class="n">file_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">b</span><span class="s2">"FIRST_INPUT"</span><span class="p">,</span> <span class="n">first_input</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="n">file_content</span> <span class="o">=</span> <span class="n">file_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">b</span><span class="s2">"SECOND_INPUT"</span><span class="p">,</span> <span class="n">second_input</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

    <span class="n">device</span> <span class="o">=</span> <span class="n">Process</span><span class="o">.</span><span class="n">from_xml_content</span><span class="p">(</span><span class="n">file_content</span><span class="p">)</span><span class="o">.</span><span class="n">get_processed_device</span><span class="p">()</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="n">container1</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">container2</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">container1</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b00"</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">container1</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">expected1</span>
        <span class="k">assert</span> <span class="n">container2</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">expected2</span>
    <span class="k">elif</span> <span class="n">container1</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b01"</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">container1</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">expected2</span>
        <span class="k">assert</span> <span class="n">container2</span><span class="o">.</span><span class="n">usage</span> <span class="o">==</span> <span class="n">expected1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/usage_combinations.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>usage_combinations<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>FIRST_INPUT<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>SECOND_INPUT<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_value_already_defined">
<code class="highlight language-python"><span class="n">test_value_already_defined</span></code>
</h2>
<div class="doc doc-contents">
<p>This test assesses the parser's ability to handle scenarios where the same value is defined multiple times
within an <code>&lt;enumeratedValues&gt;</code> container. In an SVD file, each enumerated value should represent a unique
mapping between a numerical value and its descriptive name to avoid ambiguity. <code>svdconv</code> does allow such
duplicate definitions but issues a warning, and ignores the value. A parser implementation should
enforce the same behavior.</p>
<p><strong>Expected Outcome:</strong> The parser should identify the duplicate values within the <code>&lt;enumeratedValues&gt;</code> container
and raise an error, indicating that multiple enumerations cannot share the same underlying value. Unlike
<code>svdconv</code>, which warns and ignores the value, the parser must enforce uniqueness for each value definition
within the container to ensure clarity and prevent conflicting interpretations of register settings.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_value_already_defined</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test assesses the parser's ability to handle scenarios where the same value is defined multiple times</span>
<span class="sd">    within an `&lt;enumeratedValues&gt;` container. In an SVD file, each enumerated value should represent a unique</span>
<span class="sd">    mapping between a numerical value and its descriptive name to avoid ambiguity. `svdconv` does allow such</span>
<span class="sd">    duplicate definitions but issues a warning, and ignores the value. A parser implementation should</span>
<span class="sd">    enforce the same behavior.</span>

<span class="sd">    **Expected Outcome:** The parser should identify the duplicate values within the `&lt;enumeratedValues&gt;` container</span>
<span class="sd">    and raise an error, indicating that multiple enumerations cannot share the same underlying value. Unlike</span>
<span class="sd">    `svdconv`, which warns and ignores the value, the parser must enforce uniqueness for each value definition</span>
<span class="sd">    within the container to ensure clarity and prevent conflicting interpretations of register settings.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">ProcessWarning</span><span class="p">):</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/value_already_defined.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">enum_container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b00"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b00"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b01"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b01"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/value_already_defined.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>value_already_defined<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b10<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="tests.test_process.test_enumerated_values.test_value_name_already_defined_same_container">
<code class="highlight language-python"><span class="n">test_value_name_already_defined_same_container</span></code>
</h2>
<div class="doc doc-contents">
<p>This test verifies the parser's ability to handle situations where duplicate enumerated value names are
defined within the same <code>&lt;enumeratedValues&gt;</code> container. According to best practices, each enumerated value
within a container should have a unique name to avoid confusion and ensure clarity in register configurations.
While <code>svdconv</code> allows this scenario, issuing only a warning and subsequently ignoring the duplicated
enumerated value, a robust parser implementation should enforce stricter validation by treating it as an
error. This approach prevents potential misconfigurations or ambiguity in interpreting register values.</p>
<p><strong>Expected Outcome:</strong> The parser should detect the duplicate enumerated value names within the same container and
raise an error, signaling a violation of the expected naming conventions. Unlike <code>svdconv</code>, which issues a
warning and ignores the conflicting value, the parser should ensure strict enforcement of unique enumerated
value names within each container, thereby promoting consistency and clear register definitions.</p>
<p><strong>Processable with svdconv:</strong> yes</p>
<details class="quote">
<summary>Source code in <code>tests/test_process/test_enumerated_values.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_value_name_already_defined_same_container</span><span class="p">(</span><span class="n">get_processed_device_from_testfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Device</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    This test verifies the parser's ability to handle situations where duplicate enumerated value names are</span>
<span class="sd">    defined within the same `&lt;enumeratedValues&gt;` container. According to best practices, each enumerated value</span>
<span class="sd">    within a container should have a unique name to avoid confusion and ensure clarity in register configurations.</span>
<span class="sd">    While `svdconv` allows this scenario, issuing only a warning and subsequently ignoring the duplicated</span>
<span class="sd">    enumerated value, a robust parser implementation should enforce stricter validation by treating it as an</span>
<span class="sd">    error. This approach prevents potential misconfigurations or ambiguity in interpreting register values.</span>

<span class="sd">    **Expected Outcome:** The parser should detect the duplicate enumerated value names within the same container and</span>
<span class="sd">    raise an error, signaling a violation of the expected naming conventions. Unlike `svdconv`, which issues a</span>
<span class="sd">    warning and ignores the conflicting value, the parser should ensure strict enforcement of unique enumerated</span>
<span class="sd">    value names within each container, thereby promoting consistency and clear register definitions.</span>

<span class="sd">    **Processable with svdconv:** yes</span>
<span class="sd">    """</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">ProcessWarning</span><span class="p">):</span>
        <span class="n">device</span> <span class="o">=</span> <span class="n">get_processed_device_from_testfile</span><span class="p">(</span><span class="s2">"enumerated_values/value_name_already_defined_same_container.svd"</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Register</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">enum_container</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">peripherals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">registers_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">enumerated_value_containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b00"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b00"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"0b01"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">"Description for 0b01"</span>
    <span class="k">assert</span> <span class="n">enum_container</span><span class="o">.</span><span class="n">enumerated_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
</details><details class="quote"><summary>SVD file: <code>enumerated_values/value_name_already_defined_same_container.svd</code></summary><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><code><span class="cp">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="nt">&lt;device</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w"> </span><span class="na">xs:noNamespaceSchemaLocation=</span><span class="s">"CMSIS-SVD.xsd"</span><span class="w"> </span><span class="na">schemaVersion=</span><span class="s">"1.3"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>value_name_already_defined_same_container<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;description&gt;</span>Test_Example<span class="w"> </span>device<span class="nt">&lt;/description&gt;</span>
<span class="w">  </span><span class="nt">&lt;cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span>CM0<span class="nt">&lt;/name&gt;</span>
<span class="w">  </span><span class="nt">&lt;revision&gt;</span>r0p0<span class="nt">&lt;/revision&gt;</span>
<span class="w">  </span><span class="nt">&lt;endian&gt;</span>little<span class="nt">&lt;/endian&gt;</span>
<span class="w">  </span><span class="nt">&lt;mpuPresent&gt;</span>false<span class="nt">&lt;/mpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;fpuPresent&gt;</span>false<span class="nt">&lt;/fpuPresent&gt;</span>
<span class="w">  </span><span class="nt">&lt;nvicPrioBits&gt;</span>4<span class="nt">&lt;/nvicPrioBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;vendorSystickConfig&gt;</span>false<span class="nt">&lt;/vendorSystickConfig&gt;</span>
<span class="w">  </span><span class="nt">&lt;/cpu&gt;</span>
<span class="w">  </span><span class="nt">&lt;addressUnitBits&gt;</span>8<span class="nt">&lt;/addressUnitBits&gt;</span>
<span class="w">  </span><span class="nt">&lt;width&gt;</span>32<span class="nt">&lt;/width&gt;</span>
<span class="w">  </span><span class="nt">&lt;peripherals&gt;</span>
<span class="w">    </span><span class="nt">&lt;peripheral&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>PeripheralA<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;baseAddress&gt;</span>0x40001000<span class="nt">&lt;/baseAddress&gt;</span>
<span class="w">      </span><span class="nt">&lt;addressBlock&gt;</span>
<span class="w">        </span><span class="nt">&lt;offset&gt;</span>0x0<span class="nt">&lt;/offset&gt;</span>
<span class="w">        </span><span class="nt">&lt;size&gt;</span>0x1000<span class="nt">&lt;/size&gt;</span>
<span class="w">        </span><span class="nt">&lt;usage&gt;</span>registers<span class="nt">&lt;/usage&gt;</span>
<span class="w">      </span><span class="nt">&lt;/addressBlock&gt;</span>
<span class="w">      </span><span class="nt">&lt;registers&gt;</span>
<span class="w">        </span><span class="nt">&lt;register&gt;</span>
<span class="w">          </span><span class="nt">&lt;name&gt;</span>RegisterA<span class="nt">&lt;/name&gt;</span>
<span class="w">          </span><span class="nt">&lt;addressOffset&gt;</span>0x0<span class="nt">&lt;/addressOffset&gt;</span>
<span class="w">          </span><span class="nt">&lt;fields&gt;</span>
<span class="w">            </span><span class="nt">&lt;field&gt;</span>
<span class="w">              </span><span class="nt">&lt;name&gt;</span>FieldA<span class="nt">&lt;/name&gt;</span>
<span class="w">              </span><span class="nt">&lt;bitRange&gt;</span>[1:0]<span class="nt">&lt;/bitRange&gt;</span>
<span class="w">              </span><span class="nt">&lt;enumeratedValues&gt;</span>
<span class="w">                </span><span class="nt">&lt;name&gt;</span>FieldAEnumeratedValue<span class="nt">&lt;/name&gt;</span>
<span class="w">                </span><span class="nt">&lt;usage&gt;</span>read-write<span class="nt">&lt;/usage&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b00<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b00<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b01<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b01<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b01<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">                </span><span class="nt">&lt;enumeratedValue&gt;</span>
<span class="w">                  </span><span class="nt">&lt;name&gt;</span>0b00<span class="nt">&lt;/name&gt;</span>
<span class="w">                  </span><span class="nt">&lt;description&gt;</span>Description<span class="w"> </span>for<span class="w"> </span>0b10<span class="nt">&lt;/description&gt;</span>
<span class="w">                  </span><span class="nt">&lt;value&gt;</span>0b10<span class="nt">&lt;/value&gt;</span>
<span class="w">                </span><span class="nt">&lt;/enumeratedValue&gt;</span>
<span class="w">              </span><span class="nt">&lt;/enumeratedValues&gt;</span>
<span class="w">            </span><span class="nt">&lt;/field&gt;</span>
<span class="w">          </span><span class="nt">&lt;/fields&gt;</span>
<span class="w">        </span><span class="nt">&lt;/register&gt;</span>
<span class="w">      </span><span class="nt">&lt;/registers&gt;</span>
<span class="w">    </span><span class="nt">&lt;/peripheral&gt;</span>
<span class="w">  </span><span class="nt">&lt;/peripherals&gt;</span>
<span class="nt">&lt;/device&gt;</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>